<div class="feed-container">
  <div class="criar-publicacao">
    <h3>O que você está pensando?</h3>
    <textarea [(ngModel)]="novaPublicacao" placeholder="Compartilhe algo com a turma..."></textarea>
    <button (click)="publicar()">Publicar</button>
  </div>

  <div class="publicacoes">
    <div class="publicacao" *ngFor="let publicacao of publicacoes">
      <div class="cabecalho-publicacao">
        <ng-container *ngIf="publicacao.usuarioAvatar; else avatarPadrao">
          <img [src]="publicacao.usuarioAvatar" alt="Avatar" class="avatar">
        </ng-container>
        <ng-template #avatarPadrao>
          <div class="avatar avatar-fallback d-flex align-items-center justify-content-center">
            <i class="bi bi-person-circle"></i>
          </div>
        </ng-template>
        <div class="info-usuario">
          <strong>{{publicacao.usuarioNome}}</strong>
          <span>{{formatarData(publicacao.data)}}</span>
        </div>
        <button *ngIf="podeDeletar(publicacao)" 
                (click)="deletarPublicacao(publicacao)"
                class="btn-deletar">
          <i class="bi bi-trash"></i>
        </button>
      </div>
      
      <!-- Resto do conteúdo permanece igual -->
      <div class="conteudo-publicacao">
        {{publicacao.conteudo}}
      </div>
      
      <div class="acoes-publicacao">
        <button (click)="curtir(publicacao)" class="btn-curtir">
          <i class="bi" [ngClass]="publicacao.liked ? 'bi-hand-thumbs-up-fill text-primary' : 'bi-hand-thumbs-up'"></i>
          <span class="ms-1">Curtir ({{publicacao.curtidas}})</span>
        </button>
        <button (click)="toggleComentarios(publicacao.id)" class="btn-comentar">
          <i class="bi bi-chat-dots"></i>
          <span class="ms-1">Comentários ({{publicacao.comentarios.length}})</span>
        </button>
      </div>
      
      <div class="comentarios" *ngIf="comentarioAtivo === publicacao.id">
        <div class="novo-comentario">
          <textarea [(ngModel)]="novoComentario" placeholder="Escreva um comentário..."></textarea>
          <button (click)="comentar(publicacao)">Comentar</button>
        </div>
        
        <div class="lista-comentarios">
          <div class="comentario" *ngFor="let comentario of publicacao.comentarios">
            <ng-container *ngIf="comentario.usuarioAvatar; else comentarioAvatarPadrao">
              <img [src]="comentario.usuarioAvatar" alt="Avatar" class="avatar-pequeno">
            </ng-container>
            <ng-template #comentarioAvatarPadrao>
              <div class="avatar-pequeno avatar-fallback d-flex align-items-center justify-content-center">
                <i class="bi bi-person-fill"></i>
              </div>
            </ng-template>
            <div class="conteudo-comentario">
              <strong>{{comentario.usuarioNome}}</strong>
              <p>{{comentario.conteudo}}</p>
              <small>{{formatarData(comentario.data)}}</small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>